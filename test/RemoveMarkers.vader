####################
# Test that I find all the markers in a file
####################

Given vim (Some text with no markers in it):
  hello
  this is in the fold
  this is outside of the fold

Execute (Remove the folds [there are none]):
  call RemoveMarkers()

Expect (Nothing changed):
  hello
  this is in the fold
  this is outside of the fold

#####

Given vim (Some text with a single set of markers in it):
  first line
    " {{{
  this was in a fold
  " }}}
  no longer in a fold

Execute (Remove the folds):
  call RemoveMarkers()

Expect (Folds removed):
  first line
  this was in a fold
  no longer in a fold

#####

Given vim (Some text with embedded markers in it):
  first line
  " {{{
    second line
    " {{{
      more folds!
    " }}}
    first fold again
  " }}}
  outside of folds

Execute (Remove the nested folds):
  call RemoveMarkers()

Expect (Nested folds removed):
  first line
    second line
      more folds!
    first fold again
  outside of folds

#####

Given vim (Text after the markers):
  first line
  " {{{ this is the fold
    in the fold
  " }}}
  no more folding

Execute (Remove markers, including info):
  call RemoveMarkers()

Expect (Lines, including info, removed):
  first line
    in the fold
  no more folding

#####

Given vim (Some text before  markers on the same line):
  first line
  line with markers " {{{
    this is inside the fold
  " }}}
  no longer in the fold

Execute (Remove the fold):
  call RemoveMarkers()

Expect (Information before the marker to be removed):
  first line
  line with markers 
    this is inside the fold
  no longer in the fold

Given python (A comment before the markers on the same line):
  first_line = 'Hello world'
  # This is a comment {{{
  # Now inside the fold
  # }}}
    # Another comment {{{ now with fold definitions on the outside
  # Yup, inside the fold
  # }}}

Execute (Remove the folds):
  call RemoveMarkers()

Expect python (Only the fold and the words after it to be removed):
  first_line = 'Hello world'
  # This is a comment
  # Now inside the fold
    # Now another comment
  # Yup, inside the fold
  
# vim: set foldlevel=4:
